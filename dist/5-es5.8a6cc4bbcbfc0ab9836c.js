!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"7KxR":function(n,r,o){"use strict";o.r(r),o.d(r,"OAuthModule",function(){return M});var i,a,c,s=o("ofXK"),u=o("tyNb"),d=o("mrSG"),p=o("yTNM"),l=o("gvvY"),h=o("MaMc"),f=o("Ebwu"),v=o("sX8H"),b=o("fXoL"),g=o("qAbx"),w=[{path:"callback/:identityProvider",component:(i=function(){function n(e,r,o,i,a,c,s){t(this,n),this.router=e,this.activatedRoute=r,this.apiService=o,this.localStorageService=i,this.toastService=a,this.stateService=c,this.window=s}var r,o,i;return r=n,(o=[{key:"ngOnInit",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.activatedRoute.snapshot.queryParamMap.get("error")){t.next=3;break}return t.abrupt("return");case 3:return e=this.activatedRoute.snapshot.paramMap.get("identityProvider"),t.next=6,this.apiService.authenticateWithCode({grantType:"".concat(e,"_auth_code"),code:this.activatedRoute.snapshot.queryParamMap.get("code"),redirectUri:this.getRedirectUri(e),state:this.activatedRoute.snapshot.queryParamMap.get("state")});case 6:n=t.sent,this.apiService.persistTokens(n),t.next=18;break;case 10:return t.prev=10,t.t0=t.catch(0),r=t.t0.message,t.t0.response&&t.t0.response.data&&t.t0.response.data.error&&(r=t.t0.response.data.error),this.toastService.showErrorToast("Login failed: ".concat(r)),t.next=17,this.router.navigate(["/login"]);case 17:return t.abrupt("return",void t.sent);case 18:return this.apiService.isAuthenticated=!0,t.next=21,this.stateService.init();case 21:return this.toastService.showSuccessToast("Successfully logged in"),t.next=24,this.router.navigate(["/"]);case 24:case"end":return t.stop()}},t,this,[[0,10]])}))}},{key:"getRedirectUri",value:function(t){return"".concat(this.window.location.protocol,"//").concat(this.window.location.host,"/oauth/callback/").concat(t)}}])&&e(r.prototype,o),i&&e(r,i),n}(),i.\u0275fac=function(t){return new(t||i)(b.Kb(u.c),b.Kb(u.a),b.Kb(p.a),b.Kb(l.a),b.Kb(h.a),b.Kb(f.a),b.Kb(v.a))},i.\u0275cmp=b.Eb({type:i,selectors:[["app-oauth"]],decls:4,vars:0,consts:[[2,"text-align","center","margin-top","4em"]],template:function(t,e){1&t&&(b.Qb(0,"div",0),b.Lb(1,"app-loading-state"),b.Lb(2,"br"),b.Ac(3," Authenticating ..\n"),b.Pb())},directives:[g.a],styles:["li[_ngcontent-%COMP%]{list-style-position:inside}.flex-container-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-container-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center}.dropdown-menu[_ngcontent-%COMP%]{background-color:#2f3136;color:#cfd0d1}.dropdown-item[_ngcontent-%COMP%]{color:#cfd0d1}.dropdown-divider[_ngcontent-%COMP%]{border-top:1px solid #262629}.dropdown-item[_ngcontent-%COMP%]:focus, .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#262629}"]}),i)}],m=((a=function e(){t(this,e)}).\u0275fac=function(t){return new(t||a)},a.\u0275mod=b.Ib({type:a}),a.\u0275inj=b.Hb({imports:[[u.f.forChild(w)],u.f]}),a),y=o("1kSV"),x=o("Fepa"),M=((c=function e(){t(this,e)}).\u0275fac=function(t){return new(t||c)},c.\u0275mod=b.Ib({type:c}),c.\u0275inj=b.Hb({imports:[[s.c,m,y.b,x.a]]}),c)}}])}();